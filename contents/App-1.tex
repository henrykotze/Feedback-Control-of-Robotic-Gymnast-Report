\chapter{}
\begin{comment}
An outcome assessment must accompany the Final Report and included and bound into the
report after the summary page. This assessment is a single page on which the student must
indicate which parts of the report presents evidence of achieving each of the ECSA outcomes
(as specified in this document). A sentence or two can also be given for each outcome to
explain how those parts of the report demonstrate achieving the outcome
\end{comment}

\label{chp2:concept_model}

\section{Derivation of the Mathematical Model}
\label{sec:math_model}

$$x_{1}= l_{1}\cos(\theta)$$
$$y_{1} = -l_{1}\sin(\theta)$$

$$x_{2} = L_{1}\sin(\theta) + l_{2}\sin(\theta + \phi)$$
$$y_{2} = -L_{1}\cos(\theta) - l_{2}\cos(\theta + \phi)$$

$$\dot{x_{2}} = L_{1}\cos(\theta)\dot{\theta} - l_{2}\cos(\theta+\phi)(\dot{\theta}+\dot{\phi}) $$
$$\dot{y_{2}} = L_{1}\sin(\theta)\dot{\theta}+l_{2}\sin(\theta+\phi)(\dot{\theta}+\dot{\phi})$$

$$x_{2}^2 = L_{1}^2\cos(\theta)^2\theta^2 +l_{2}^2\cos(\theta+\phi)^2(\dot{\theta}+\dot{\phi})^2 + 2L_{1}l_{2}\dot{\theta}(\dot{\theta}+\dot{\theta})\cos(\theta)\cos(\theta+\phi)$$
$$y_{2}^2 = L_{1}^2\sin(\theta)^2\theta^2 +l_{2}^2\sin(\theta+\phi)^2(\dot{\theta}+\dot{\phi})^2 + 2L_{1}l_{2}\dot{\theta}(\dot{\theta}+\dot{\theta})\sin(\theta)\sin(\theta+\phi)$$

$$x_{2}^2+y_{2}^2 = L_{1}^2\theta^2[\cos(\theta)^2+\sin(\theta)^2]+l_{2}^2(\dot{\theta}+\dot{\phi})^2[\cos(\theta+\phi)^2+\sin(\theta+\phi)^2] +$$
$$ 2L_{1}l_{2}\dot{\theta}(\dot{\theta}+\dot{\phi})[\cos(\theta)\cos(\theta+\phi)+\sin(\theta)\sin(\theta+\phi)]$$	

Using the following trigonometric identities $$ \cos(\gamma)^2 + \sin(\gamma)^2 = 1 $$ 
$$ \cos(\gamma)\cos(\alpha)+\sin(\gamma)\sin(\alpha) = \cos(\gamma - \alpha) $$ the above equation resolves to: $$ V_{2}^2 = L_{1}\dot{\theta}^2+l_{2}^2(\dot{\theta}+\dot{\phi})^2 + 
2L_{1}l_{2}(\dot{\theta}+\dot{\phi})\dot{\theta}\cos(\phi)$$

The kinetic energy in the system consist of the fixed rotation of the underactuated  pendulum and the rotation and velocity of the actuated pendulum.

$$ T = \frac{1}{2}I_{A}\dot{\theta}^2 + \frac{1}{2}I_{B}(\dot{\theta}+\dot{\phi})^2 + \frac{1}{2}m_{2}V_{2}^2$$
$$ T = \frac{1}{2}I_{A}\dot{\theta}^2 + \frac{1}{2}I_{B}(\dot{\theta}+\dot{\phi})^2 + \frac{1}{2}m_{2}[L_{1}\dot{\theta}^2+l_{2}^2(\dot{\theta}+\dot{\phi})^2 + 
2L_{1}l_{2}(\dot{\theta}+\dot{\phi})\dot{\theta}\cos(\phi)]^2$$

The potential energy in the system is defined as
$$V=-m_{1}gl_{1}\cos(\theta)-m_{2}g[L_{1}\cos(\theta)+l_{2}\cos(\theta+\phi)]$$

The Lagrange is defined as 
$$\mathcal{L}=T-V$$
$$\mathcal{L} = \frac{1}{2}I_{A}\dot{\theta}^2 + \frac{1}{2}I_{B}(\dot{\theta}+\dot{\phi})^2 + \frac{1}{2}m_{2}[L_{1}\dot{\theta}^2+l_{2}^2(\dot{\theta}+\dot{\phi})^2 + 
2L_{1}l_{2}(\dot{\theta}+\dot{\phi})\dot{\theta}\cos(\phi)]^2+m_{1}gl_{1}\cos(\theta)+$$
$$m_{2}g[L_{1}\cos(\theta)+l_{2}\cos(\theta+\phi)]$$

$$\frac{\partial\mathcal{L}}{\partial\theta} = -m_{1}gl_{1}\sin(\theta)-m_{2}gL_{2}\sin(\theta)-m_{2}gl_{2}\sin(\theta+\phi)$$
$$\frac{d}{dt}\frac{\partial\mathcal{L}}{\partial\dot{\theta}} = I_{A}\ddot{\theta}+I_{B}\ddot{\theta}+I_{B}\ddot{\phi}+m_{2}L_{1}^2\ddot{\theta}+m_{2}l_{2}^2\ddot{\theta}+m_{2}l_{2}\ddot{\phi}+2m_{2}L_{1}l{2}\ddot{\theta}\cos(\phi)-2m_{2}L_{1}l_{2}\dot{\theta}\dot{\phi}\sin(\phi)+$$
$$m_{2}L_{1}l_{2}\ddot{\phi}\cos(\phi)-m_{2}L_{1}l_{2}\dot{\phi}^2\sin(\phi)$$


$$\frac{\partial\mathcal{L}}{\partial\phi} = -m_{2}L_{1}l_{2}(\dot{\theta}+\dot{\phi})\dot{\theta}\sin(\phi)-m_{2}gl_{2}\sin(\theta+\phi)$$

$$\frac{d}{dt}\frac{\partial\mathcal{L}}{\partial\dot{\phi}}=I_{B}\ddot{\theta}+I_{B}\ddot{\phi}+m_{2}l_{2}^2\ddot{\theta}+m_{2}l_{2}^2\ddot{\phi}+m_{2}L_{1}l_{2}\ddot{\theta}\cos(\phi)-m_{2}L_{1}l_{2}\dot{\theta}\dot{\phi}\sin(\phi)$$

The differential equation describing the dynamics of the system is
$$\frac{d}{dt}\frac{\partial\mathcal{L}}{\partial\vec{\dot{q}}}-\frac{\partial\mathcal{L}}{\partial q} = B(\dot{q})+\tau(q)$$ 
where  $ q = 
\begin{bmatrix}
\theta \\
\phi
\end{bmatrix}
$
\section{Collocated Linearisation}
\begin{equation} \label{app:eq:condense1}
d_{11}\ddot{\theta}+d_{12}\ddot{\phi} + h_{1} + \psi_{1} = 0
\end{equation}
\begin{equation} \label{app:eq:condense2}
d_{21}\ddot{\theta} + d_{22}\ddot{\phi} + h_{2} + \psi_{2} = \tau
\end{equation}

Starting from the condense equation (\ref{app:eq:condense1}) and (\ref{app:eq:condense2}), $\ddot{q_{1}}$ is solved in equation (\ref{app:eq:condense1}) and substituted in (\ref{app:eq:condense1}) resulting in 

\begin{equation} \label{app:eq:condense2}
\bar{d_{2}}\ddot{\theta} + \bar{h_{2}} + \bar{\psi_{2}} = \tau
\end{equation}
where the newly defined terms are given as: 
$$\bar{d_{2}} = d_{22} - \frac{d_{21}d_{12}}{d_{11}}$$
$$\bar{h_{2}} = h_{2} - \frac{d_{21}h_{1}}{d_{11}} $$
$$\bar{\psi_{2}} = \psi_{2} - \frac{d_{21}\psi_{1}}{d_{11}} $$


$\tau$ can now chosen to linearise the terms in equation (\ref{app:eq:condense2}) as:

$\tau = \bar{d_{2}}v_{2}+\bar{h_{2}} + \bar{\psi}$


\section{Taylor Series Expansion Around Unstable Equilibrium Position}
\label{sec:linerisation}



\includepdf[pages=1,pagecommand={\section{Electronic Design Schematic} \thispagestyle{empty} \label{sec:schematics}}, fitpaper=true]{./figs/Acrobat.pdf}
\includepdf[pages=2-,pagecommand={\thispagestyle{empty}}, fitpaper=true]{./figs/Acrobat.pdf}


\section{Communication Structure}
\label{sec:software_requirements}
\begin{figure}[h]
	\centering
	\input{"./figs/uart_struct/uart_struct.tikz"}
	\caption{Data Structure for Sending Commands}
	\label{fig:uart_struct_app}
\end{figure}

In Table \ref{table:uart_commands} the various commmands that are used in the command structure shown in Figure \ref{fig:uart_struct_app} used for debugging purposes is explained with the possible value ranges that can be used.


\begin{table}[h]
	\centering
	\begin{tabular}{|c|c|c|c|}
		\hline
		Command & Range &  Reason for Implementation & Effect \\
		\hline
		\hline
		A & None & Testing of the UART circuit & Send the following text: Feedback Control Of Robotic Gymnast\\
		\hline
		B & 0-100 &  & Changes PWM Duty-Cycle \\
		\hline
		C & 0-1 & Testing of AND digital Circuit Directional Control of Motor & Change the rotational direction \\
		\hline
		D & & & \\
		\hline
	
	\end{tabular}
	\caption{Summary of Communication Commands and their Effects}
	\label{table:uart_commands}

\end{table}


\newpage


%\includepdf[pages=-,scale-=0.8]{./figs/Acrobat.pdf}
%\includegraphics{./figs/Acrobat.pdf}





\section{Techno-Economy Assessment}
\label{sec:techno_eco}

\subsection{Budget}
The comparison between the proposed and actual budget is discussed and why the project was under-budget.\\

The proposed budget for the project was R3000. This budget was required to cover manufacturing cost and the buying of sensors, equipment and components. Table \ref{table:budget} provides the categories and amount of what the project consisted out of.\\

\begin{table}[h]
	\centering
	\begin{tabular}{|c|c|}
		\hline
		Category & Cost \\
		\hline
		\hline
		Electronic Components & R100 \\
		\hline
		Mechanical Components & R300 \\
		\hline 
		Software & R0 \\
		\hline
		Mechanical Manufacturing & R0 \\
		\hline
		Electronical Manufacturing & R0 \\
		\hline
		\hline 
		Total & R200 \\
		\hline
		
	\end{tabular}
	\caption{Categories of the Budget }
	\label{table:budget}
	
\end{table}

It is visible from the budget that the project is under-budget. The reason for being under-budget is due the Electrical and Electronic (E\&E) Deparment providing the service and components which were most expensive. This includes the manufacturing cost of the mechanical and electronic design and the Mechanical and Mechatronic Department providing the most expensive mechanical component.


\subsection{Planning}

\begin{figure}[h]
	\centering
	\includegraphics[scale=0.5]{./figs/planning_gantt/ganttchart.jpg}
	\caption{Planned Gantt Chart of the Project}
	\label{fig:planned_ganttchart}
\end{figure}

\begin{figure}[h]
	\centering
	\includegraphics[scale=0.5]{./figs/planning_gantt/ganttchart.jpg}
	\caption{Actual Gantt Chart of the Project}
	\label{fig:actual_ganttchart}
\end{figure}

\begin{table}[h]
	\centering
	\begin{tabular}{|c|c|c|}
		\hline
		Category & Planned Hours & Actual Hours \\
		\hline
		\hline
		Simulation Implementation & 2 & 2 \\
		\hline
		Testing \& Verification of Simulation & 2 & 2 \\
		\hline 
		Mechanical Design  & 2 & 2 \\
		\hline
		Electronic Design & 2 & 2 \\
		\hline
		System Identification Test & 2 & 2 \\
		\hline
		Experiments & 2 & \\
		\hline
		Writing of Report & 2 & 2 \\
		\hline
		
	\end{tabular}
	\caption{Hours worked during the different phases of the project}
	\label{table:hours_worked}
	
\end{table}

Figure \ref{fig:planned_ganttchart} shows the Gantt chart for the planned activities during the project. For the majority of the project, the planned activities were followed as planned. All the activities from the literature study up to the implementation and verification of system results to simulation results.\\

During the experimental phase changes were required to the mechanical design which included a better connection between the motor shaft and actuated pendulum resulting in additional time required for the experiments. This additional time increased the safety during experiments and allowed the practical results presented in the report. This additional time was justified by using the time waiting for the part to be manufacture to write on my report.\\	

The electronic design took longer than what was planned due to experiencing difficulty programming the theoretical controllers on the microcontroller. It was decided to extend the time required for this phase due to without the controllers no practical results of these controllers would be acquired. It was decided to take an additional week to implement the controllers.\\

\subsection{Technical Impact}
The impact of the results presented in this report on the field of control systems, society and industry are discussed and whether the financial input was worthwhile.\\

The problem of the swinging and balancing of the robotic gymnast is a well research problem. Solutions to the swinging and balancing are provided on a theoretical level and supported by simulation results however little practical results are available of these theoretical solutions. The impact of this report includes the practical results of one of these theoretical implementation and discuss how the practical results differ from the theoretical results.\\

The impact of the practical results of this report on the industry of underactuated robotics are little. The robotic gymnast is a interesting problem and consist out of a highly non-linear and linear behaviour and is rather consider a great introductory problem to the field of underactuated robotics.\\

The impact of this report has little impact on society due to being of little interest on industry. The industry will not use the results and discussion presented in this report due to the reasons mentioned in the previous paragraph.\\

The financial input was worthwhile due to providing practical results on one theoretical implementation to the swinging and balancing of the robotic gymnast. \\


\subsection{Return on Investment}
The short and long term value from a technical and economical perspective is provided in this section. A motivation on the continuing research in the field of underactuated robotics are given and the financial cost to further research in this field.\\

Researching underactuated robotics is a exciting and growing research field due to the field of underactuated robotics have increasingly become more important due to technology growing in areas where control is crucial. Areas include: air drones, underwater inspection vehicles, space exploration and the aeroplane industry. \\

Underactuated robotics is an interesting and open field in control, with many design options to approach these types of problems. The most interesting examples of underactuated control problems are legged, swimming and flying robots that has been mentioned in the previous paragraph. This results in underactuated robotics being relevant in many fields.\\

The economical value of underactuated robotics in the short term and long term is high. Products are being brought to market that solve very difficult problems and can be used a broad variety. These products include \textit{Spot} from \textit{Boston Dynamics} which can be used for inspection, transportation and entertainment.\\

The financial cost to further the research on underactuated robotics are low due to the use of simulation programs that allows the testing of solutions on realistic simulated models. This significantly reduce the number of prototypes required to test the solution practically. 

\subsection{Potential for Commercialisation}\
The potential for the commercialisation of the contents within the report is discussed and the value of this commercialisations is given.\\

The contents does not have any real value for commercialisation. As mentioned earlier the problem researched is a very good introductory to underactuated robotics due to containing techniques that is a foundation for more advanced problems. 

\includepdf[pages=1,pagecommand={\section{Risk Analysis \& Safety Procedures} \thispagestyle{empty} \label{sec:mech_drawings}}, fitpaper=true]{./figs/safety_report/safety_report.pdf}
\includepdf[pages=2-,pagecommand={\thispagestyle{empty}}, fitpaper=true]{./figs/safety_report/safety_report.pdf}

%----------------------------------------------------------------------------
\endinput
